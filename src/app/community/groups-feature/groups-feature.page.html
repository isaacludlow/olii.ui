<ion-toolbar color="primary" mode="ios">
    <ion-title>
        <h2 class="section-title">Groups</h2>
    </ion-title>
</ion-toolbar>

<ion-content id="content-id">

    <div class="my-groups-container">
        <div class="my-groups-header-container">
            <h3>My groups</h3>
            <div class="see-all-link" routerLink="./all">See all</div>
        </div>
        <div class="my-groups-selector-container">
            <div class="group-links-container">
                <div class="group-link" *ngFor="let group of groups | slice:0:calcDisplayGroups();">
                    <div class="group-image">
                        <olii-container-cover-image [imageUrl]="sanitizeUrl(group.CoverImageUrl)" boarderRadius="50%" [routerLink]="['./group', group.Id]"></olii-container-cover-image>
                    </div>
                    <div class="group-nav-group-name">{{ group.Name }}</div>
                </div>
            </div>

            <div id="new-group-button-id" class="new-group-button-container">
                <div class="new-group-button" routerLink="./create">
                    <olii-base-icon size="medium" name="add-outline"></olii-base-icon>
                </div>
                <div class="group-nav-group-name">+ New</div>
            </div>
        </div>
    </div>

    <hr>

    <div>
        <h3 class="section-header">Latest</h3>

        <div class="post" *ngFor="let postWrapper of groupsLatest">
            <ion-card>
                <div class="card-content">
                    
                    <div class="post-group-header">
                        <div class="group-info">
                            <div class="group-image">
                                <olii-container-cover-image [imageUrl]="postWrapper.GroupImageUrl" boarderRadius="50%"></olii-container-cover-image>
                            </div>
                            <div class="group-name">{{postWrapper.GroupName}}</div>
                        </div>
                        <div class="post-date">{{postWrapper.GroupPost.Date.toDateString()}}</div>
                    </div>

                    <div class="post-content">
                        <div class="poster-info">
                            <div class="poster-image">
                                <olii-container-cover-image [imageUrl]="postWrapper.GroupPost.Author.ProfilePictureUrl" boarderRadius="50%"></olii-container-cover-image>
                            </div>
                            <div class="poster-name">{{postWrapper.GroupPost.Author.FirstName}} {{postWrapper.GroupPost.Author.LastName}}</div>
                        </div>
                        
                        {{postWrapper.GroupPost.Content}}
                        
                        <div class="post-images">
                            <olii-responsive-aspect-ratio-container *ngFor="let image of postWrapper.GroupPost.ImageUrls" aspectRatio="1/1" class="image-container">
                                <olii-container-cover-image [imageUrl]="image" boarderRadius="5px"></olii-container-cover-image>
                            </olii-responsive-aspect-ratio-container>
                        </div>
                    </div>

                    <div class="comment-icon">
                        <!-- TODO: Implement comment functionality-->
                        <olii-icon-with-off-white-square-background name="chatbox-ellipses-outline"></olii-icon-with-off-white-square-background>
                    </div>
                </div>
            </ion-card>
        </div>
    </div>

</ion-content>